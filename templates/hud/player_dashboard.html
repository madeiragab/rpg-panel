{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="content">
    {% if show_character_navbar and characters_and_npcs %}
    <div class="character-navbar">
        <div class="character-navbar-inner">
            {% for item in characters_and_npcs %}
                <a href="{% if item.type == 'character' %}{% url 'character_detail' item.id %}?mode=player{% else %}#{% endif %}" class="character-nav-item">
                    {% if item.avatar %}
                        <img src="{{ item.avatar }}" alt="{{ item.name }}" class="character-nav-avatar">
                    {% else %}
                        <div class="character-nav-avatar"></div>
                    {% endif %}
                    <span class="character-nav-name">{{ item.name }}</span>
                </a>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <div class="dashboard-header">
        <h1 class="panel-title">Minhas Campanhas</h1>
        <a href="{% url 'home' %}" class="hud-button ghost">Voltar</a>
    </div>

    {% if campaigns %}
        <div class="campaigns-grid">
            {% for campaign in campaigns %}
            <a href="{% url 'campaign_detail' campaign.pk %}{% if player_mode %}?mode=player{% endif %}" class="campaign-card">
                {% if campaign.banner %}
                    <div class="campaign-banner" style="background-image: url('{{ campaign.banner.url }}')"></div>
                {% else %}
                    <div class="campaign-banner empty"></div>
                {% endif %}
                <div class="campaign-info">
                    <h3 class="campaign-name">{{ campaign.name }}</h3>
                    <p class="campaign-desc">{{ campaign.description|truncatewords:15 }}</p>
                    <p class="campaign-master">Mestre: {{ campaign.master.username }}</p>
                </div>
            </a>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            <p>Você não está em nenhuma campanha ainda.</p>
            <p>Aguarde um mestre adicioná-lo a uma campanha.</p>
        </div>
    {% endif %}
</div>
{% endblock %}
